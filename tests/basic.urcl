bits 8

@define case_result %numb
@define test_cases %int
@define test_end %text
@define test_end_data '\n'

// NOTE: `sub` is tested in `core.urcl`
// NOTE: `nop` and `hlt` are not tested (obviously)

// jmp
    jmp .jmp_ok1
    out case_result 1
    .jmp_ok1
    out case_result 0

    imm r1 .jmp_ok2
    jmp r1
    out case_result 2
    .jmp_ok2
    out case_result 0
out test_cases 2
out test_end test_end_data

// mov
    mov r2 3
    mov r1 r2
    sub r1 r1 3
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// lsh
    lsh r1 0x88
    sub r1 r1 0x10
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// inc
    inc r1 255
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// dec
    dec r1 0
    sub r1 r1 255
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// neg
    neg r1 0x69
    sub r1 r1 0x97
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// and
    and r1 5 3
    sub r1 r1 1
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// or
    or r1 5 3
    sub r1 r1 7
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// not
    not r1 0
    sub r1 r1 255
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// xnor
    xnor r1 5 3
    sub r1 r1 249
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// xor
    xor r1 5 3
    sub r1 r1 6
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// nand
    nand r1 5 3
    sub r1 r1 254
    out case_result r1
out test_cases 1
out test_end test_end_data
imm r1 1

// brl
// brg

// bre
    bre .bre_ok_1 69 325
    out case_result 1

    .bre_ok_1
    out case_result 0
    bre .bre_fail_2 69 42
    out case_result 0
    bge .bre_ok_2 r0 r0

    .bre_fail_2
    out case_result 2
.bre_ok_2
out test_cases 2
out test_end test_end_data
imm r1 1

// bne
    bne .bne_ok_1 69 42
    out case_result 1

    .bne_ok_1
    out case_result 0
    bne .bne_fail_2 69 325
    out case_result 0
    bge .bne_ok_2 r0 r0

    .bne_fail_2
    out case_result 2
.bne_ok_2
out test_cases 2
out test_end test_end_data
imm r1 1

// Bod [a a],
// Bev [a a],

// ble

// brz
    brz .brz_ok_1 256
    out case_result 1

    .brz_ok_1
    out case_result 0
    brz .brz_fail_2 69
    out case_result 0
    bge .brz_ok_2 r0 r0

    .brz_fail_2
    out case_result 2
.brz_ok_2
out test_cases 2
out test_end test_end_data
imm r1 1

// bnz
    bnz .bnz_ok_1 69
    out case_result 1

    .bnz_ok_1
    out case_result 0
    bnz .bnz_fail_2 256
    out case_result 0
    bge .bnz_ok_2 r0 r0

    .bnz_fail_2
    out case_result 2
.bnz_ok_2
out test_cases 2
out test_end test_end_data
imm r1 1

// Brn [a a],
// Brp [a a],

// Psh [a],
// Pop [r],

// Cal [a],
// Ret [],

// Cpy [a a],
// Brc [a a a],
// Bnc [a a a],
